### 四、三者的关联关系（核心记忆点）
1. **变量类型 → 存储类型**：  
   - 全局变量：由EVM管理，无需关心存储位置。  
   - 状态变量：**默认在storage**（永久存储）。  
   - 局部变量：  
     - 值类型：默认在**栈**（临时存储）。  也可以指定memory或storage
     - 引用类型：必须显式指定（`memory`临时存储，或`storage`引用状态变量）。  


2. **数据类型 → 存储类型**：  
   - 值类型：可在栈、memory、storage中存储（赋值时均为值复制）。  
   - 引用类型：  
     - `mapping`：**只能在storage**（状态变量或引用状态变量的局部变量）。  
     - 数组/结构体：可在memory、storage、calldata中存储（赋值行为取决于存储位置）。  


3. **存储类型 → 赋值行为**：  
   - 不同存储位置之间赋值：**值复制**（如storage→memory，或memory→storage）。  
   - 相同存储位置之间赋值：  
     - storage→storage：**引用传递**（修改新变量会影响原变量）。  
     - memory→memory：值复制（引用类型在memory中赋值是复制）。  
